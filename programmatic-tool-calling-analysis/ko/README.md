# Programmatic Tool Calling vs ê¸°ì¡´ Tool Calling: ê²°ê³¼ëŠ” ëˆ„ê°€ ë°›ëŠ”ê°€

> Tool Callingì˜ ë¹„ìš©ì€ "ê²°ê³¼ê°€ ì–´ë””ë¡œ ê°€ëŠëƒ"ì— ìˆë‹¤

*ğŸ“ 2026-02-24*

---

## 1. ë°°ê²½: Tool Callingì˜ ë°œì „

### 1.1 ê¸°ì¡´ Tool Calling

LLMì´ toolì„ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ íŒ¨í„´ì´ë‹¤:

```text
User â†’ LLM â†’ {"name": "query_db", "input": {"sql": "..."}}
                                    â†“
                              Tool Execution
                                    â†“
                                   ê²°ê³¼ â†’ LLM â†’ ìµœì¢… ì‘ë‹µ
```

LLMì´ JSON í˜•íƒœì˜ ì¸ìë¥¼ ìƒì„±í•˜ë©´, ê°œë°œìì˜ ì„œë²„ì—ì„œ toolì´ ì‹¤í–‰ë˜ê³ , ê·¸ ê²°ê³¼ê°€ ë‹¤ì‹œ LLMì˜ contextì— ë“¤ì–´ê°„ë‹¤.

### 1.2 Parallel Tool Calling

ì—¬ëŸ¬ toolì„ ë³‘ë ¬ë¡œ í˜¸ì¶œí•˜ì—¬ **round-trip íšŸìˆ˜**ë¥¼ ì¤„ì¸ë‹¤:

```text
User â†’ LLM â†’ [tool_use A, tool_use B, tool_use C]  (í•œ ë²ˆì— ë³‘ë ¬ í˜¸ì¶œ)
                        â†“
             [Tool Execution A, B, C]
                        â†“
             [result A, result B, result C] â†’ LLM â†’ ìµœì¢… ì‘ë‹µ
```

round-tripì€ ì¤„ì—ˆì§€ë§Œ, **ëª¨ë“  ê²°ê³¼ê°€ LLM contextì— ë“¤ì–´ê°€ëŠ” êµ¬ì¡°ëŠ” ë™ì¼í•˜ë‹¤**.

### 1.3 CodeAct (Wang et al., 2024, ICML)

ê¸°ì¡´ LLM AgentëŠ” JSONì´ë‚˜ ì •í•´ì§„ í…ìŠ¤íŠ¸ í¬ë§·ìœ¼ë¡œ actionì„ ìƒì„±í•œë‹¤. CodeActì€ ì´ ë°©ì‹ì˜ ê·¼ë³¸ì  í•œê³„(constrained action space & restricted flexibility)ë¥¼ **executable Python codeë¥¼ unified action spaceë¡œ ì‚¬ìš©í•˜ëŠ”** ê²ƒìœ¼ë¡œ í•´ê²°í–ˆë‹¤:

```text
ê¸°ì¡´:     LLM â†’ {"tool": "search", "query": "..."}     (JSON action)
CodeAct:  LLM â†’ result = search("..."); print(len(result))  (Code action)
```

17ê°œ LLM ëŒ€ìƒ ì‹¤í—˜ì—ì„œ CodeActì€ ê¸°ì¡´ JSON/Text ë°©ì‹ë³´ë‹¤ ë†’ì€ ì„±ê³µë¥ ì„ ë³´ì˜€ë‹¤. ê°€ì¥ ì„±ëŠ¥ì´ ì¢‹ì•˜ë˜ GPT-4-1106-previewì˜ ê²½ìš° Text ëŒ€ë¹„ **ì•½ 20%p ë†’ì€ ì„±ê³µë¥ **(74.4% vs 53.7%)ì„ ë‹¬ì„±í–ˆë‹¤. ì´ ì„±ëŠ¥ í–¥ìƒì´ ì–´ë””ì„œ ì˜¤ëŠ”ì§€ëŠ” ì„¹ì…˜ 6ì—ì„œ ìì„¸íˆ ë¶„ì„í•œë‹¤.

### 1.4 Programmatic Tool Calling (PTC)

Anthropicì€ CodeActì˜ ê°œë…ì„ ë‹´ì€ PTCë¥¼ Claudeì— ë„ì…í•˜ì˜€ë‹¤.

```text
User â†’ LLM â†’ code_execution("""
    result = await query_db(...)
    total = sum(r['revenue'] for r in result)
    print(f"ì´ ë§¤ì¶œ: {total}")
""")
```

ê¸°ë³¸ì ì¸ ì•„í‚¤í…ì²˜ëŠ” CodeActì™€ ê°™ë‹¤. ì½”ë“œë¥¼ ìƒì„±í•˜ê³ , Python runtimeì—ì„œ ì‹¤í–‰í•˜ê³ , ì½”ë“œ ì‹¤í–‰ ê²°ê³¼(stdout/stderr)ë¥¼ LLMì— ë°˜í™˜í•œë‹¤.

PTCê°€ ì œí’ˆìœ¼ë¡œì„œ ì¶”ê°€í•œ ê²ƒì€ `allowed_callers`(tool í˜¸ì¶œ ê¶Œí•œ ì œì–´), container lifecycle ê´€ë¦¬, API ì„¤ê³„ ê°™ì€ **ì—”ì§€ë‹ˆì–´ë§ ìš”ì†Œ**ë‹¤. CodeActë¥¼ ì œí’ˆí™”í•œ ê²ƒìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.

---

## 2. í•µì‹¬ ì§ˆë¬¸: PTCê°€ ì •ë§ ìœ ë¦¬í•œê°€?

PTCì˜ ì¥ì ìœ¼ë¡œ í”íˆ ì–¸ê¸‰ë˜ëŠ” ê²ƒë“¤ì´ ìˆë‹¤:

- forë¬¸ìœ¼ë¡œ ë°˜ë³µ í˜¸ì¶œ â†’ í† í° ì ˆì•½
- round-trip ê°ì†Œ â†’ ì§€ì—°ì‹œê°„ ê°ì†Œ

ê·¸ëŸ°ë° ì—¬ê¸°ì„œ ì˜ë¬¸ì´ ìƒê¸´ë‹¤:

> "ë³µì¡í•œ toolì˜ ê²½ìš°, ê¸°ì¡´ tool callingì€ ì¸ìë§Œ ë„˜ê¸°ë©´ ë˜ëŠ”ë°, PTCëŠ” ë§¤ë²ˆ í˜¸ì¶œ ì½”ë“œë¥¼ ìƒì„±í•´ì•¼ í•˜ì§€ ì•Šë‚˜? ì•ˆì •ì„±ë„ ë–¨ì–´ì§€ì§€ ì•Šë‚˜?"

ì´ ì˜ë¬¸ì€ íƒ€ë‹¹í•´ë³´ì¸ë‹¤. ê·¸ë¦¬ê³  ì´ ì˜ë¬¸ì„ í•´ì†Œí•˜ë ¤ë©´ **tool resultê°€ ì–´ë””ë¡œ ê°€ëŠ”ì§€**ë¥¼ ì •í™•íˆ ì´í•´í•´ì•¼ í•œë‹¤.

---

## 3. ê²°ê³¼ëŠ” ëˆ„ê°€ ë°›ëŠ”ê°€

### 3.1 í”í•œ ì˜¤í•´

PTCì—ì„œ Claudeê°€ ìƒì„±í•˜ëŠ” ê²ƒì€ **toolì˜ êµ¬í˜„ ì½”ë“œê°€ ì•„ë‹ˆë¼ í˜¸ì¶œ ì½”ë“œ**ë‹¤. toolì˜ ì‹¤ì œ êµ¬í˜„ì€ ì—¬ì „íˆ ê°œë°œì ì„œë²„ì—ì„œ deterministicí•˜ê²Œ ì‹¤í–‰ëœë‹¤. ì´ ì ì€ ê¸°ì¡´ tool callingê³¼ ë™ì¼í•˜ë‹¤.

```text
ê¸°ì¡´:  LLM â†’ {"sql": "SELECT ..."}  â†’ ì„œë²„ ì‹¤í–‰ â†’ ê²°ê³¼
PTC:   LLM â†’ result = await query_db("SELECT ...") â†’ ì„œë²„ ì‹¤í–‰ â†’ ê²°ê³¼
```

**tool ì‹¤í–‰ê¹Œì§€ëŠ” ë™ì¼í•˜ë‹¤. ì°¨ì´ëŠ” ê·¸ ì´í›„ì— ìˆë‹¤.**

### 3.2 ê²°ì •ì  ì°¨ì´: ê²°ê³¼ì˜ ìˆ˜ì‹ ì

| | ê¸°ì¡´ Tool Calling | PTC |
|---|---|---|
| **tool resultë¥¼ ë°›ëŠ” ì£¼ì²´** | LLM (ì¶”ë¡  ì—”ì§„) | Python runtime (container) |
| **LLMì´ ë³´ëŠ” ê²ƒ** | raw ê²°ê³¼ ì „ì²´ | ì½”ë“œ ì‹¤í–‰ ê²°ê³¼(stdout/stderr)ë§Œ |
| **ê²°ê³¼ ì²˜ë¦¬** | LLMì´ í† í° ë‹¨ìœ„ë¡œ ì½ê³  ì¶”ë¡  | Pythonì´ ë³€ìˆ˜ë¡œ ì²˜ë¦¬ |

ì´ê²ƒì„ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´:

**ê¸°ì¡´ Tool Calling:**

```text
func1(a) ì‹¤í–‰ â†’ ê²°ê³¼ 10,000í–‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º LLM context window
                                               (10,000í–‰ì„ í† í°ìœ¼ë¡œ ì½ìŒ)
```

**PTC:**

```text
func1(a) ì‹¤í–‰ â†’ ê²°ê³¼ 10,000í–‰ â†’ Python ë³€ìˆ˜ (result)
                                      â”‚
                                      â–¼
                                Pythonì´ ì²˜ë¦¬
                                (sort, filter, sum...)
                                      â”‚
                                      â–¼
                          ì½”ë“œ ì‹¤í–‰ ê²°ê³¼: "ì´ ë§¤ì¶œ: $2.95M"
                                      â”‚
                                      â–¼
                              LLM context window
                              (ì²˜ë¦¬ëœ ê²°ê³¼ë§Œ ì½ìŒ)
```

> Anthropic ê³µì‹ ë¬¸ì„œ: "Tool results from programmatic invocations do not count toward your input/output token usage. Only the final code execution result and Claude's response count."

---

## 4. Parallel Tool Callingê³¼ì˜ ë¹„êµ

"ê·¸ëŸ¬ë©´ Parallel Tool Callingì´ë‘ ë­ê°€ ë‹¤ë¥¸ê°€?"ë¼ëŠ” ì˜ë¬¸ì´ ìì—°ìŠ¤ëŸ½ê²Œ ë”°ë¼ì˜¨ë‹¤. ë‘˜ ë‹¤ round-tripì„ ì¤„ì´ëŠ”ë°, í•µì‹¬ ì°¨ì´ëŠ” **ê²°ê³¼ê°€ contextì— ëˆ„ì ë˜ëŠ” ë°©ì‹**ì´ë‹¤.

### 4.1 Parallel Tool Callingì˜ íë¦„

```text
LLM: [tool_use A, tool_use B, tool_use C]
       â†“            â†“            â†“
  ì„œë²„ ì‹¤í–‰A    ì„œë²„ ì‹¤í–‰B    ì„œë²„ ì‹¤í–‰C
       â†“            â†“            â†“
  result A      result B     result C
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
            ì „ë¶€ LLM contextì— ë“¤ì–´ê° âœ…
                    â†“
              LLM: ìµœì¢… ì‘ë‹µ
```

### 4.2 PTCì˜ íë¦„

```text
LLM: code_execution("""
    result_a = await tool_a(...)
    result_b = await tool_b(...)
    result_c = await tool_c(...)
    print(summary)
""")
       â†“            â†“            â†“
  tool ì‹¤í–‰A    tool ì‹¤í–‰B    tool ì‹¤í–‰C
       â†“            â†“            â†“
  Python ë³€ìˆ˜   Python ë³€ìˆ˜  Python ë³€ìˆ˜   â† LLMì€ ì´ê±¸ ëª» ë´„ âŒ
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
          Pythonì´ ì²˜ë¦¬ í›„ print()
                    â†“
        ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ë§Œ LLM contextì— ë“¤ì–´ê° âœ…
                    â†“
              LLM: ìµœì¢… ì‘ë‹µ
```

ì‹¤ì œ ì‹¤í–‰ ë©”ì»¤ë‹ˆì¦˜ì€ ìœ„ ê·¸ë¦¼ë³´ë‹¤ ë³µì¡í•˜ë‹¤. ê° `await`ì—ì„œ ì½”ë“œ ì‹¤í–‰ì´ ì¼ì‹œ ì¤‘ì§€ë˜ê³ , APIê°€ ê°œë°œìì—ê²Œ `tool_use` ë¸”ë¡ì„ ë°˜í™˜í•œë‹¤. ê°œë°œìê°€ toolì„ ì‹¤í–‰í•˜ì—¬ ê²°ê³¼ë¥¼ APIì— ëŒë ¤ë³´ë‚´ë©´ ì½”ë“œê°€ ì¬ê°œëœë‹¤. í•˜ì§€ë§Œ í•µì‹¬ì€ ë™ì¼í•˜ë‹¤: **tool resultëŠ” Python ë³€ìˆ˜ë¡œ ë“¤ì–´ê°€ê³ , LLMì€ ìµœì¢… ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ë§Œ ë³¸ë‹¤.**

### 4.3 êµ¬ì²´ì  ë¹„ìš© ë¹„êµ

DBì—ì„œ 10,000í–‰ì„ ë°˜í™˜í•˜ëŠ” toolì„ 3ê°œ ì§€ì—­ì— ëŒ€í•´ í˜¸ì¶œí•˜ëŠ” ê²½ìš°:

| | ê¸°ì¡´ (Sequential) | Parallel | PTC |
|---|---|---|---|
| round-trip | 3íšŒ | 1íšŒ | 1íšŒ |
| LLM contextì— ë“¤ì–´ê°€ëŠ” ë°ì´í„° | 30,000í–‰ (ëˆ„ì ) | 30,000í–‰ | ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ë§Œ |
| ì¤‘ê°„ ì¬ì¶”ë¡  í•„ìš” | ë§¤ í˜¸ì¶œë§ˆë‹¤ | ì—†ìŒ | ì—†ìŒ |
| input í† í° ë¹„ìš© | ë§¤ìš° í¼ | í¼ | ì‘ìŒ |

**â†’ Parallelê³¼ PTCì˜ ê²°ì •ì  ì°¨ì´ëŠ” round-tripì´ ì•„ë‹ˆë¼, tool resultê°€ LLM contextì— ë“¤ì–´ê°€ëŠëƒ ì—¬ë¶€ë‹¤.**

---

## 5. "Toolì„ ì •êµí•˜ê²Œ ì„¤ê³„í•˜ë©´ ë˜ì§€ ì•Šë‚˜?"

ì—¬ê¸°ì„œ ë˜ í•˜ë‚˜ì˜ í•©ë¦¬ì ì¸ ì˜ë¬¸ì´ ìƒê¸´ë‹¤:

> "toolì´ ì²˜ìŒë¶€í„° í•„í„°ë§ëœ ê²°ê³¼ë§Œ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„í•˜ë©´, PTC ì—†ì´ë„ ê°™ì€ íš¨ê³¼ ì•„ë‹Œê°€?"

ë§ëŠ” ë§ì´ë‹¤. toolì˜ responseë¥¼ ì •êµí•˜ê²Œ ì„¤ê³„í•˜ë©´ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œë„ context ë¶€ë‹´ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ í˜„ì‹¤ì  í•œê³„ê°€ ìˆë‹¤:

### 5.1 Toolì€ ë²”ìš©ì ìœ¼ë¡œ ì„¤ê³„ëœë‹¤

```text
query_db("SELECT * FROM sales WHERE region = 'West'")
```

ì´ toolì´ ë°˜í™˜í•˜ëŠ” ê²°ê³¼ë¥¼ ì–´ë–»ê²Œ ê°€ê³µí• ì§€ëŠ” **í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ë‹¤ë¥´ë‹¤**:

| ìƒí™© | í•„ìš”í•œ ê°€ê³µ |
|------|------------|
| "ì´ ë§¤ì¶œ ì•Œë ¤ì¤˜" | `sum(revenue)` |
| "ìƒìœ„ 5ê°œ ê³ ê°" | `sorted(...)[:5]` |
| "ì›”ë³„ ì¶”ì´" | `groupby(month)` |
| "ì´ìƒì¹˜ íƒì§€" | `[r for r in result if r['revenue'] > threshold]` |

Tool ìì²´ì— ì´ ëª¨ë“  ê°€ê³µ ë¡œì§ì„ ë„£ìœ¼ë©´ toolì˜ parameterê°€ ë³µì¡í•´ì§€ê³ , ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì´ ë‚˜ì˜¬ ë•Œë§ˆë‹¤ toolì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

### 5.2 PTCì˜ ê°€ì¹˜: LLMì´ ê°€ê³µ ë¡œì§ì„ ìœ ì—°í•˜ê²Œ ìƒì„±

PTCì—ì„œëŠ” **"ì–´ë–»ê²Œ ê°€ê³µí• ì§€"ë¥¼ LLMì´ ë§¤ë²ˆ ì½”ë“œë¡œ ê²°ì •**í•œë‹¤:

```python
# LLMì´ ìƒí™©ì— ë§ê²Œ ìƒì„±í•˜ëŠ” ì½”ë“œ
result = await query_db("SELECT * FROM sales WHERE region = 'West'")

# ì´ ë§¤ì¶œì´ í•„ìš”í•œ ê²½ìš°:
total = sum(r['revenue'] for r in result)
print(f"ì´ ë§¤ì¶œ: ${total:,.0f}")
```

```python
# ìƒìœ„ 5ê°œê°€ í•„ìš”í•œ ê²½ìš°:
result = await query_db("SELECT * FROM sales WHERE region = 'West'")
top5 = sorted(result, key=lambda x: x['revenue'], reverse=True)[:5]
for r in top5:
    print(f"{r['customer']}: ${r['revenue']:,.0f}")
```

**â†’ Toolì€ ë²”ìš©ìœ¼ë¡œ ë‘ê³ , ê°€ê³µì€ LLMì´ ìœ ì—°í•˜ê²Œ ì½”ë“œë¡œ ì²˜ë¦¬í•œë‹¤.**

---

## 6. ì„±ëŠ¥ í–¥ìƒì˜ í•µì‹¬ì€ ë¬´ì—‡ì¸ê°€?

CodeAct ë…¼ë¬¸ì€ ì½”ë“œ actionì˜ ì¥ì ìœ¼ë¡œ ë„¤ ê°€ì§€ë¥¼ ì œì‹œí•œë‹¤:

| ì¥ì  | ì„¤ëª… |
|------|------|
| **(1) Dynamic adjustment** | Python ì¸í„°í”„ë¦¬í„°ì™€ì˜ multi-turn ìƒí˜¸ì‘ìš©ì„ í†µí•´ ì‹¤í–‰ ê²°ê³¼ë¥¼ ê´€ì°°í•˜ê³ , ì´ì „ actionì„ ìˆ˜ì •í•˜ê±°ë‚˜ ìƒˆ actionì„ ìƒì„± |
| **(2) Existing software packages** | PyPIì˜ ê¸°ì¡´ íŒ¨í‚¤ì§€ë¥¼ ì§ì ‘ í™œìš©í•˜ì—¬ action spaceë¥¼ í™•ì¥ |
| **(3) Code familiarity** | LLMì´ ì‚¬ì „í•™ìŠµì—ì„œ ëŒ€ëŸ‰ì˜ ì½”ë“œë¥¼ ì ‘í–ˆê¸° ë•Œë¬¸ì— ì½”ë“œ ìƒì„±ì— ì¹œìˆ™ |
| **(4) Control and data flow** | ë£¨í”„, ì¡°ê±´ë¬¸, ë³€ìˆ˜ ì €ì¥ ë“±ì„ í†µí•´ ì—¬ëŸ¬ toolì„ ì¡°í•©í•˜ê³  ì¤‘ê°„ ê²°ê³¼ë¥¼ ì¬ì‚¬ìš© |

### 6.1 ë…¼ë¬¸ì˜ ì‹¤í—˜ êµ¬ì¡°

ë…¼ë¬¸ì€ ë‘ ê°€ì§€ ì‹¤í—˜ìœ¼ë¡œ ì´ ì¥ì ë“¤ì˜ ê¸°ì—¬ë¥¼ í™•ì¸í•œë‹¤.

**Â§2.2 (API-Bank)** â€” atomic tool use(ë‹¨ì¼ tool í˜¸ì¶œ)ë§Œ í…ŒìŠ¤íŠ¸í•œë‹¤. ë…¼ë¬¸ì˜ 1ì°¨ ëª©ì ì€ RQ1, ì¦‰ "ì½”ë“œ ì¹œìˆ™ë„(ì¥ì  3)ê°€ ë„ì›€ì´ ë˜ëŠ”ê°€?"ë¥¼ ê²€ì¦í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¨ì¼ í˜¸ì¶œì´ê¸° ë•Œë¬¸ì— control and data flow(ì¥ì  4)ì˜ íš¨ê³¼ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ì œê±°ëœë‹¤. ë…¼ë¬¸ Introductionì—ì„œ ì´ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¤ëª…í•œë‹¤:

> "To demonstrate benefit (3), our first experiment (Â§2.2) compares CodeAct to baselines on basic tasks involving atomic tool use (i.e., only one tool is used per action), ablating the control and data flow advantage offered by CodeAct."

ê²°ê³¼: ë…¼ë¬¸ì— ë”°ë¥´ë©´ **comparable** ìˆ˜ì¤€ì´ì—ˆë‹¤. ì½”ë“œ ì¹œìˆ™ë„ë§Œìœ¼ë¡œëŠ” ìœ ì˜ë¯¸í•œ ì°¨ì´ë¥¼ ë§Œë“¤ì§€ ëª»í•œë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì¤€ë‹¤.

**Â§2.3 (M3ToolEval)** â€” ë³µì¡í•œ multi-tool ì¡°í•© íƒœìŠ¤í¬ë¥¼ í…ŒìŠ¤íŠ¸í•œë‹¤. Control and data flow(ì¥ì  4)ê°€ í¬í•¨ëœë‹¤. ê²°ê³¼: GPT-4-1106-preview ê¸°ì¤€ Text ëŒ€ë¹„ ì•½ 20%p ë†’ì€ ì„±ê³µë¥ , í‰ê·  2.2í„´ ì ì€ ìƒí˜¸ì‘ìš©.

ë‘ ì‹¤í—˜ì„ ëŒ€ì¡°í•˜ë©´:

| ì‹¤í—˜ | control and data flow | ê²°ê³¼ |
|------|----------------------|------|
| Â§2.2 (API-Bank) | ì œê±°ë¨ (ë‹¨ì¼ í˜¸ì¶œ) | comparable |
| Â§2.3 (M3ToolEval) | í¬í•¨ë¨ (multi-tool) | í° í­ì˜ ì„±ëŠ¥ í–¥ìƒ |

Â§2.2ì—ì„œ Â§2.3ìœ¼ë¡œ ê°ˆ ë•Œ ì¶”ê°€ë˜ëŠ” ê²ƒì´ control and data flowì´ê³ , ì´ë•Œ ì„±ëŠ¥ ì°¨ì´ê°€ í¬ê²Œ ë²Œì–´ì§„ë‹¤. **ë…¼ë¬¸ì€ ì´ë¥¼ í†µí•´ control and data flowê°€ CodeAct ì„±ëŠ¥ í–¥ìƒì˜ í•µì‹¬ ìš”ì¸ì´ë¼ëŠ” ê²ƒì„ ë³´ì—¬ì¤€ë‹¤.**

### 6.2 context íš¨ìœ¨ì„± ê´€ì 

> ì—¬ê¸°ì„œë¶€í„°ëŠ” ë…¼ë¬¸ì˜ ì£¼ì¥ì´ ì•„ë‹ˆë¼ **ë‚˜ì˜ í•´ì„**ì´ë‹¤.

ë…¼ë¬¸ì€ control and data flowì˜ ì´ì ì„ "ì—¬ëŸ¬ toolì„ ì¡°í•©í•˜ê³  ì¤‘ê°„ ê²°ê³¼ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•˜ì—¬ ì¬ì‚¬ìš©í•˜ëŠ” ëŠ¥ë ¥"ìœ¼ë¡œ ì„¤ëª…í•œë‹¤. ë…¼ë¬¸ì— "context efficiency"ë‚˜ "context engineering" ê°™ì€ ìš©ì–´ëŠ” ë“±ì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.

í•˜ì§€ë§Œ ì´ ë©”ì»¤ë‹ˆì¦˜ì„ context ê´€ì ì—ì„œ ë‹¤ì‹œ ë³´ë©´:

```text
control flow (ë£¨í”„, ì¡°ê±´ë¬¸):
  JSON:    5ë²ˆ ì™•ë³µ â†’ ë§¤ í„´ë§ˆë‹¤ ì´ì „ ê²°ê³¼ê°€ contextì— ëˆ„ì 
  CodeAct: forë¬¸ìœ¼ë¡œ 1í„´ì— ì²˜ë¦¬ â†’ ëˆ„ì  ìì²´ê°€ ì—†ìŒ

data flow (ë³€ìˆ˜ ì €ì¥, ì¬ì‚¬ìš©):
  JSON:    tool result ì „ì²´ê°€ LLM contextì— ë“¤ì–´ê°
  CodeAct: ë³€ìˆ˜ì— ì €ì¥, ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ë§Œ ì „ë‹¬
```

**ê²°êµ­ control and data flowê°€ í•˜ëŠ” ì¼ì€ LLM contextì— ë“¤ì–´ê°€ëŠ” ì •ë³´ë¥¼ ì¤„ì´ëŠ” ê²ƒì´ë‹¤.**  ë‹¤ë§Œ 2024ë…„ ì´ˆì—ëŠ” "context engineering"ì´ë¼ëŠ” ê´€ì ì´ ì§€ê¸ˆì²˜ëŸ¼ ë³´í¸í™”ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, ë…¼ë¬¸ì—ì„œ contextë¼ëŠ” ë‹¨ì–´ë¥¼ ì°¾ê¸° ì–´ë µë‹¤. ê°œë…ì€ ìˆì—ˆì§€ë§Œ ì´ë¥¼ ì•„ìš°ë¥´ëŠ” ìš©ì–´ê°€ ì•„ì§ ì—†ì—ˆë˜ ì‹œê¸°ì˜€ë‹¤.

---

## 7. (ë‚´ ìƒê°) íŠ¸ë ˆì´ë“œì˜¤í”„ì™€ ì‹œì‚¬ì 

### 7.1 PTCê°€ ìœ ë¦¬í•œ ê²½ìš°

| ì¡°ê±´ | ì´ìœ  |
|------|------|
| **ë‹¤ì¤‘ tool í˜¸ì¶œ (3ê°œ+)** | round-trip ì œê±° + context ëˆ„ì  ë°©ì§€ |
| **ë…ë¦½ì  ë³‘ë ¬ ì‘ì—…ì´ ë§ì€ ê²½ìš°** | 50ê°œ endpoint ì²´í¬ ë“±, ìˆ˜ê°€ ë§ìœ¼ë©´ round-trip ì°¨ì´ê°€ í¼ |
| **tool resultê°€ í° ê²½ìš°** | ëŒ€ëŸ‰ ë°ì´í„°ë¥¼ ì½”ë“œë¡œ í•„í„°ë§ í›„ ìš”ì•½ë§Œ ì „ë‹¬ |
| **ì¡°ê±´ë¶€ ë¡œì§** | ì¤‘ê°„ ê²°ê³¼ì— ë”°ë¼ ë‹¤ìŒ í˜¸ì¶œ ê²°ì • |
| **early termination** | ì¡°ê±´ ì¶©ì¡± ì‹œ ì¦‰ì‹œ ì¤‘ë‹¨ |

### 7.2 ê¸°ì¡´ Tool Callingì´ ìœ ë¦¬í•œ ê²½ìš°

| ì¡°ê±´ | ì´ìœ  |
|------|------|
| **ë‹¨ì¼ tool í˜¸ì¶œ** | ì½”ë“œ ì‹¤í–‰ í™˜ê²½ ì˜¤ë²„í—¤ë“œë§Œ ì¶”ê°€ë¨ |
| **tool resultê°€ ì‘ê³  ê°„ë‹¨** | context ì ˆì•½ íš¨ê³¼ ë¯¸ë¯¸ |
| **ì¦‰ê°ì  ì‚¬ìš©ì í”¼ë“œë°± í•„ìš”** | PTCëŠ” ì½”ë“œ ì™„ë£Œ í›„ì—ì•¼ ì‘ë‹µ |
| **ì½”ë“œ ìƒì„± ëŠ¥ë ¥ì´ ë‚®ì€ ëª¨ë¸** | ì½”ë“œ í’ˆì§ˆì´ ì•ˆì •ì„±ì— ì§ê²°ë¨ |

ì°¸ê³ ë¡œ, í˜„ì¬ ëŒ€ë¶€ë¶„ì˜ open/closed ëª¨ë¸ì€ ê° providerì˜ tool calling í¬ë§·ì— ë§ê²Œ fine-tuneë˜ì–´ ìˆë‹¤. ì•ìœ¼ë¡œ PTC ë°©ì‹ì— ìµœì í™”ëœ ëª¨ë¸ì´ ë“±ì¥í•  ê°€ëŠ¥ì„±ì€ ìˆì§€ë§Œ, í˜„ ì‹œì ì—ì„œëŠ” ì´ ì ë„ ì„ íƒ ì‹œ ê³ ë ¤í•´ì•¼ í•  ë¶€ë¶„ì´ë‹¤. íŠ¹íˆ íŒŒë¼ë¯¸í„°ê°€ ì‘ì€ ëª¨ë¸ì˜ ê²½ìš°, PTC ë°©ì‹ì´ ê¸°ì¡´ tool callingì— ë¹„í•´ ì•ˆì •ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

### 7.3 ì•ˆì •ì„±ì— ëŒ€í•œ ê³ ë ¤

"ìƒì„±ëœ ì½”ë“œëŠ” JSON ì¸ìë³´ë‹¤ ì‹¤íŒ¨ ê°€ëŠ¥ì„±ì´ ë†’ì§€ ì•Šì„ê¹Œ?"ë¼ëŠ” ìš°ë ¤ê°€ ìˆì„ ìˆ˜ ìˆë‹¤:

```text
ê¸°ì¡´: {"sql": "SELECT ..."}          â† êµ¬ì¡°ê°€ ë‹¨ìˆœ, ì‹¤íŒ¨ ì ìŒ
PTC:  result = await query_db(...)    â† ì½”ë“œ ì „ì²´ê°€ ì˜¬ë°”ë¼ì•¼ í•¨
      filtered = [r for r in result if ...]
      print(summary)
```

í•˜ì§€ë§Œ PTCì—ì„œ ìƒì„±ë˜ëŠ” ì½”ë“œëŠ” ëŒ€ë¶€ë¶„ forë¬¸, ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜, ì¡°ê±´ë¬¸ ê°™ì€ ë‹¨ìˆœí•œ Python íŒ¨í„´ì´ê³ , ì—ëŸ¬ê°€ ë‚˜ë©´ stderrë¡œ ë°˜í™˜ë˜ì–´ ì¬ì‹œë„ê°€ ê°€ëŠ¥í•˜ë‹¤. ëª¨ë¸ì´ ì ì°¨ ë°œì „í• ìˆ˜ë¡, ì½”ë“œ ì•ˆì •ì„±ì´ í° ì¥ë²½ì´ ë˜ê¸°ëŠ” ì–´ë ¤ìš¸ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.

### 7.4 ACE-FCAì™€ì˜ ê³µí†µì 

[ì´ì „ ê¸€](../../ace-fca-agentflow-analysis/ko/README.md)ì—ì„œ ë¶„ì„í•œ ACE-FCAë„ ë™ì¼í•œ ì›ë¦¬ë¥¼ ë”°ë¥¸ë‹¤:

```text
ACE-FCA:      [Research ì „ì²´ ê³¼ì •] â†’ Bottleneck â†’ research.md (ì••ì¶•ëœ ê²°ê³¼)
CodeAct/PTC:  [Tool result ì „ì²´]   â†’ Bottleneck â†’ ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ (ì••ì¶•ëœ ê²°ê³¼)
```

**ì •ë³´ íë¦„ì— bottleneckì„ ë§Œë“¤ì–´ noiseëŠ” ë²„ë¦¬ê³  signalë§Œ ì „ë‹¬í•œë‹¤.** ì ìš© ë ˆë²¨ì€ ë‹¤ë¥´ì§€ë§Œ ì›ë¦¬ëŠ” ê°™ë‹¤:

| | ACE-FCA | CodeAct/PTC |
|---|---|---|
| **ë¬´ì—‡ì„ ì••ì¶•í•˜ëŠ”ê°€** | Phaseì˜ ì „ì²´ context | Tool result |
| **ì–´ë””ì„œ ì••ì¶•í•˜ëŠ”ê°€** | Sub-agent â†’ artifact | Python runtime â†’ ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ |
| **ëˆ„ê°€ ë°›ëŠ”ê°€** | ë‹¤ìŒ Phaseì˜ LLM | ê°™ì€ í„´ì˜ LLM |
| **ë ˆë²¨** | Macro (í”„ë¡œì íŠ¸) | Micro (ë‹¨ì¼ í„´) |

ì´ ì ‘ê·¼ë²•ë“¤ì„ ê´€í†µí•˜ëŠ” ì¸ì‚¬ì´íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤:

> **"LLMì˜ context windowëŠ” ë¹„ì‹¼ ìì›ì´ë‹¤. ê±°ê¸°ì— ë“¤ì–´ê°€ëŠ” ì •ë³´ë¥¼ ìµœì†Œí™”í•˜ë¼."**

---

## 8. ê²°ë¡ 

```text
ê¸°ì¡´ Tool Calling:
  Tool result â†’ LLMì´ ì§ì ‘ ì½ìŒ
  â†’ ê²°ê³¼ê°€ í¬ë©´ context ë¹„ìš© ê¸‰ì¦

Parallel Tool Calling:
  Tool result â†’ LLMì´ ì§ì ‘ ì½ìŒ (round-tripë§Œ ì¤„ì„)
  â†’ context ë¹„ìš© ë¬¸ì œëŠ” ë™ì¼

CodeAct/PTC:
  Tool result â†’ Pythonì´ ë°›ì•„ì„œ ì²˜ë¦¬ â†’ ì½”ë“œ ì‹¤í–‰ ê²°ê³¼ë§Œ LLMì— ì „ë‹¬
  â†’ context ë¹„ìš© ëŒ€í­ ì ˆê°
```

> PTCì˜ ë³¸ì§ˆì€ **"tool resultì˜ ìˆ˜ì‹ ìë¥¼ LLMì—ì„œ Python runtimeìœ¼ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤"**.

| ìƒí™© | ê¶Œì¥ ë°©ì‹ |
|------|----------|
| ë‹¨ìˆœ ë‹¨ì¼ í˜¸ì¶œ, ê²°ê³¼ ì‘ìŒ | ê¸°ì¡´ Tool Calling |
| ë…ë¦½ì  ë‹¤ì¤‘ í˜¸ì¶œ, ìˆ˜ê°€ ë§ìŒ | **PTC** |
| ë‹¤ì¤‘ í˜¸ì¶œ + ê²°ê³¼ í¼ + ê°€ê³µ í•„ìš” | **PTC** |
| ì¡°ê±´ë¶€ ë¡œì§ / ë£¨í”„ / early exit | **PTC** |

---

## ì°¸ê³  ìë£Œ

- [CodeAct: Executable Code Actions Elicit Better LLM Agents (ICML 2024)](https://arxiv.org/abs/2402.01030)
- [CodeAct GitHub Repository](https://github.com/xingyaoww/code-act)
- [Anthropic: Programmatic Tool Calling](https://platform.claude.com/docs/en/agents-and-tools/tool-use/programmatic-tool-calling)
- [Anthropic: Code Execution Tool](https://platform.claude.com/docs/en/agents-and-tools/tool-use/code-execution-tool)
- [Anthropic: Tool Use Overview](https://platform.claude.com/docs/en/agents-and-tools/tool-use/overview)
